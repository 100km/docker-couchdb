From 6e0202cc757f8f8c19250b312d4ac2e25d642a88 Mon Sep 17 00:00:00 2001
From: Samuel Tardieu <sam@rfc1149.net>
Date: Tue, 28 Apr 2015 13:12:42 +0200
Subject: [PATCH] Week of day for past expiration date 1990-01-01 is Monday
Bcc: sam@rfc1149.net

Fixes COUCHDB-2677
---
 share/doc/src/api/server/common.rst       | 2 +-
 src/couchdb/couch_httpd_misc_handlers.erl | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/share/doc/src/api/server/common.rst b/share/doc/src/api/server/common.rst
index 6327dc0..1b90929 100644
--- a/share/doc/src/api/server/common.rst
+++ b/share/doc/src/api/server/common.rst
@@ -952,7 +952,7 @@ structure is as follows:
     Content-Type: application/json
     Date: Sat, 10 Aug 2013 11:46:25 GMT
     ETag: "DGRWWQFLUDWN5MRKSLKQ425XV"
-    Expires: Fri, 01 Jan 1990 00:00:00 GMT
+    Expires: Mon, 01 Jan 1990 00:00:00 GMT
     Pragma: no-cache
     Server: CouchDB (Erlang/OTP)
 
diff --git a/src/couchdb/couch_httpd_misc_handlers.erl b/src/couchdb/couch_httpd_misc_handlers.erl
index c86f5c7..20a1bf3 100644
--- a/src/couchdb/couch_httpd_misc_handlers.erl
+++ b/src/couchdb/couch_httpd_misc_handlers.erl
@@ -118,7 +118,7 @@ handle_uuids_req(#httpd{method='GET'}=Req) ->
             {"Date", couch_util:rfc1123_date()},
             {"Cache-Control", "no-cache"},
             % Past date, ON PURPOSE!
-            {"Expires", "Fri, 01 Jan 1990 00:00:00 GMT"},
+            {"Expires", "Mon, 01 Jan 1990 00:00:00 GMT"},
             {"Pragma", "no-cache"},
             {"ETag", Etag}
         ],
-- 
2.3.6

